-- Destructive DDL: deletes all old tables and creates new ones
DROP TABLE Shelf;
DROP TABLE Book;
DROP TABLE Customer;
DROP TABLE Rental;

CREATE TABLE Shelf (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
ShelfName VARCHAR2(100),
Capacity NUMBER,
CONSTRAINT PK_Shelf PRIMARY KEY (id)
);

-- QUICK FIX: USE ALTERS DIRECTLY UNDER TABLE CREATION
-- ALTER TABLE SHELF DROP COLUMN DESCRIPTION;
-- ALTER TABLE SHELF ADD Capacity NUMBER;

CREATE TABLE Customer (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
FirstName VARCHAR2(100),
LastName VARCHAR2(100),
DateOfBirth DATE,
libraryNumber NUMBER,
CONSTRAINT PK_Customer PRIMARY KEY (id)
);

-- ALTER TABLE CUSTOMER ADD FIRSTNAME VARCHAR2(100);

CREATE TABLE Book (
Id NUMBER GENERATED BY DEFAULT AS IDENTITY,
Isbn VARCHAR2(20),
Title VARCHAR2(500),
Subtitle VARCHAR2(500),
AuthorLastName VARCHAR(100),
ShelfName VARCHAR(100),
CONSTRAINT PK_Book PRIMARY KEY (id)
);


-- ALTER TABLE BOOK ADD SUBTITLE VARCHAR2(500);
-- ALTER TABLE book MODIFY Title varchar2(500);


CREATE TABLE Rental (
CustomerId NUMBER,
BookId NUMBER,
RentDate DATE,
ReturnDate DATE,
CONSTRAINT FK_Rental_Customer FOREIGN KEY (CustomerId) REFERENCES CUSTOMER,
CONSTRAINT FK_Rental_Book FOREIGN KEY (BookId) REFERENCES BOOK
);

